# Frontend - Интерфейс для статистического анализа данных

Фронтенд-часть проекта представляет собой современное веб-приложение, разработанное с использованием Next.js и React, для взаимодействия с API статистического анализа данных. Приложение предоставляет пользователям удобный интерфейс для загрузки данных, выбора методов анализа и визуализации результатов с помощью интерактивных графиков и таблиц.

## Технологии

- **Next.js 15** - Современный React-фреймворк с серверным рендерингом и маршрутизацией
- **React 19** - Библиотека для создания пользовательских интерфейсов
- **TypeScript** - Типизированный JavaScript для более надежного кода
- **Tailwind CSS** - Утилитарный CSS-фреймворк для быстрой стилизации
- **Shadcn/UI** - Компонентная библиотека, построенная на Radix UI
- **Recharts & D3.js** - Библиотеки для создания интерактивных графиков и визуализаций
- **React Hook Form** - Библиотека для управления формами
- **Zod** - Библиотека для валидации данных
- **React Dropzone** - Компонент для загрузки файлов

## Архитектура проекта

Проект следует архитектуре App Router от Next.js с четким разделением на компоненты, страницы и утилиты:

```
frontend/
├── app/                    # Основные страницы приложения (Next.js App Router)
│   ├── auth/               # Страницы аутентификации
│   │   ├── login/          # Вход в систему
│   │   ├── register/       # Регистрация
│   │   └── forgot-password/# Восстановление пароля
│   ├── dashboard/          # Основные страницы после входа
│   │   ├── upload/         # Загрузка файла и выбор анализа
│   │   ├── results/        # Просмотр результатов анализа
│   │   │   └── [id]/       # Детальные результаты конкретного анализа
│   │   ├── history/        # История анализов пользователя
│   │   └── settings/       # Настройки пользователя
│   ├── globals.css         # Глобальные стили
│   ├── layout.tsx          # Корневой макет приложения
│   └── page.tsx            # Главная страница
├── components/             # Многоразовые компоненты
│   ├── charts/             # Компоненты для визуализации данных
│   │   ├── distribution-chart.tsx    # График распределения с гистограммой
│   │   ├── regression-chart.tsx      # График регрессионного анализа
│   │   ├── residuals-analysis.tsx    # Визуализация анализа остатков
│   │   ├── BoxPlotChart.tsx          # Диаграмма размаха (boxplot)
│   │   └── time-series-chart.tsx     # График временных рядов
│   ├── ui/                 # Базовые UI компоненты (shadcn/ui)
│   ├── dashboard-nav.tsx   # Навигация в дашборде
│   ├── language-provider.tsx  # Провайдер для мультиязычности
│   ├── language-switcher.tsx  # Переключатель языков
│   └── theme-provider.tsx     # Провайдер для темы (светлая/темная)
├── hooks/                  # Пользовательские хуки
│   ├── use-mobile.tsx      # Определение мобильного устройства
│   └── use-toast.ts        # Управление уведомлениями
├── lib/                    # Вспомогательные утилиты
│   ├── auth.ts             # Функции для аутентификации
│   ├── chart-utils.ts      # Утилиты для работы с графиками
│   └── utils.ts            # Общие утилиты
└── public/                 # Статические файлы
```

## Основные функциональные модули

### 1. Аутентификация и авторизация
- Регистрация и вход пользователей
- Защита маршрутов с помощью JWT-токенов
- Управление сессиями и выход из системы
- Восстановление пароля

### 2. Загрузка и анализ данных
- Загрузка файлов CSV и Excel через интерфейс Drag & Drop
- Выбор методов статистического анализа с дополнительными параметрами
- Предварительный просмотр колонок загруженного файла
- Отправка данных на анализ и отображение прогресса

### 3. Визуализация результатов анализа
- **Описательная статистика**
  - Таблицы с базовыми статистическими показателями
  - Гистограммы распределения значений
  - Доверительные интервалы

- **Тесты на нормальность распределения**
  - Результаты тестов Шапиро-Уилка
  - Визуализация с Q-Q графиками
  - Гистограммы с наложенной нормальной кривой

- **Регрессионный анализ**
  - Интерактивные графики с различными моделями регрессии
  - Таблицы коэффициентов и статистических показателей
  - Анализ остатков и диагностика моделей
  - Формулы полученных моделей

- **Тесты Вилкоксона**
  - Тесты знаковых рангов для связанных выборок
  - Отображение результатов и их интерпретация

### 4. История и управление анализами
- Список всех выполненных анализов пользователя
- Возможность просмотра ранее выполненных анализов
- Удаление ненужных результатов анализа

### 5. Мультиязычность и темы
- Поддержка нескольких языков интерфейса
- Переключение между светлой и темной темами

## Интерфейсы данных

Приложение работает с несколькими типами данных для различных видов анализа:

### Описательная статистика
```typescript
interface Descriptive {
  variableName: string;
  count: string;
  mean: number;
  median: number;
  mode: string[];
  variance: number;
  stdDev: number;
  variationCoefficient: number;
  skewness: number;
  kurtosis: number;
  minValue: number;
  maxValue: number;
}
```

### Тесты нормальности
```typescript
interface NormalityTestResultData {
  columnName: string;
  testName?: string;
  statistic: number;
  pValue: number;
  isNormal: boolean;
  degreesOfFreedom?: number;
  intervals?: number;
}
```

### Регрессионный анализ
```typescript
interface RegressionAnalysisData {
  dependent_variable: string;
  independent_variables: string[];
  data_points: Array<{ x: number; y: number }>;
  models: RegressionModelData[];
}
```

### Тесты Вилкоксона
```typescript
interface WilcoxonSignedRankTestResult {
  testType: string;
  variable1: string;
  variable2: string;
  statistic: number;
  pValue: number;
  conclusion: string;
  sampleSize: number;
}
```

## Взаимодействие с бэкендом

Фронтенд взаимодействует с Go-сервером через REST API:

- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Авторизация пользователя
- `POST /api/auth/refresh` - Обновление токена доступа
- `POST /api/analyze` - Отправка файла на анализ
- `POST /api/columns` - Получение списка колонок из файла
- `GET /api/analyses/history` - Получение истории анализов
- `GET /api/analyses/history/:runId/results` - Получение результатов анализа
- `DELETE /api/analyses/history/:runId` - Удаление анализа

## Особенности реализации

### Графики и визуализация
- Использование комбинации Recharts и D3.js для создания интерактивных и информативных графиков
- Адаптивный дизайн графиков под разные размеры экранов
- Настраиваемые цветовые схемы для светлой и темной темы

### Локализация
- Мультиязычная поддержка через провайдер контекста
- Встроенные переводы для русского и английского языков

### Формы и валидация
- Строгая валидация ввода с использованием Zod
- Обработка различных форматов файлов (CSV, Excel)
- Обратная связь пользователю при ошибках валидации

### Безопасность
- Защита маршрутов с помощью JWT-токенов
- Автоматическое обновление токенов
- Безопасное хранение данных сессии

## Запуск проекта

### Предварительные требования
- Node.js 18.0 или выше
- npm или pnpm

### Установка зависимостей
```bash
# Установка зависимостей
npm install
# или
pnpm install
```

### Запуск в режиме разработки
```bash
npm run dev
# или
pnpm dev
```

Приложение будет доступно по адресу: `http://localhost:3000`

### Сборка для продакшена
```bash
npm run build
npm run start
# или
pnpm build
pnpm start
```

## Возможные настройки

Фронтенд имеет несколько переменных окружения, которые можно настроить:

- `NEXT_PUBLIC_API_URL` - URL API бэкенда (по умолчанию: http://localhost:8080)
- `NEXT_PUBLIC_ENABLE_DEBUG` - Включение отладочной информации

## Требования к браузеру

Приложение оптимизировано для современных браузеров:
- Chrome (последние 2 версии)
- Firefox (последние 2 версии)
- Safari (последние 2 версии)
- Edge (последние 2 версии) 