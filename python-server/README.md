# Python Server - Вычислительное ядро статистического анализа

Вычислительный сервер на языке Python предоставляет мощные статистические алгоритмы для анализа данных, доступные через gRPC интерфейс. Сервер построен на принципах гексагональной архитектуры (порты и адаптеры), что обеспечивает четкое разделение ответственности и возможность тестирования компонентов изолированно.

## Технологии

- **Python 3.8+** - Мощный язык программирования для обработки данных
- **gRPC** - Высокопроизводительный фреймворк для RPC (Remote Procedure Call)
- **Protocol Buffers** - Компактный механизм сериализации структурированных данных
- **pandas** - Библиотека для манипуляции данными и анализа
- **NumPy** - Библиотека для научных вычислений
- **SciPy** - Библиотека для статистических вычислений
- **statsmodels** - Библиотека для статистического моделирования

## Архитектура проекта

Сервер построен на принципах гексагональной архитектуры:

```
python-server/
├── analysis_modules/        # Модули статистического анализа
│   ├── descriptive.py       # Описательная статистика
│   ├── normality.py         # Тесты на нормальность
│   ├── confidence_interval.py # Доверительные интервалы
│   ├── goodness_of_fit.py   # Тесты хи-квадрат
│   └── regression.py        # Регрессионный анализ
├── internal/                # Внутренняя структура приложения
│   ├── adapters/            # Адаптеры для внешних систем
│   │   ├── data_loader.py   # Загрузка данных из разных форматов
│   │   ├── descriptive_stats.py # Адаптер для описательной статистики
│   │   ├── normality_test.py # Адаптер для тестов на нормальность
│   │   ├── grpc_server.py   # gRPC сервер и обработчики
│   │   └── ...              # Другие адаптеры
│   └── core/                # Ядро приложения
│       ├── domain/          # Бизнес-модели
│       ├── ports/           # Интерфейсы для взаимодействия
│       └── services/        # Реализация бизнес-логики
├── analysis_pb2.py          # Сгенерированные классы Protocol Buffers
├── analysis_pb2_grpc.py     # Сгенерированные gRPC сервисы
└── main.py                  # Точка входа в приложение
```

## Основные функциональные модули

### 1. Описательная статистика
- Расчет базовых статистических показателей (среднее, медиана, мода)
- Вычисление мер разброса (дисперсия, стандартное отклонение)
- Анализ формы распределения (асимметрия, эксцесс)
- Построение гистограмм распределения
- Вычисление доверительных интервалов

### 2. Тесты на нормальность распределения
- Тест Шапиро-Уилка для проверки нормальности
- Тест хи-квадрат (Пирсона) для оценки соответствия распределению

### 3. Регрессионный анализ
- Линейная регрессия
- Квадратичная регрессия
- Степенная регрессия
- Экспоненциальная регрессия
- Логарифмическая регрессия
- Тригонометрическая регрессия
- Сигмоидная регрессия
- Оценка качества моделей (R², скорректированный R², F-статистика)

## gRPC API

Сервер предоставляет следующие gRPC методы:

```proto
service AnalysisService {
    rpc AnalyzeData(AnalysisRequest) returns (AnalyzeDataResponse);
}
```

### AnalysisRequest
- `file_content` - бинарное содержимое файла (CSV, Excel)
- `file_name` - имя загружаемого файла
- `selected_analyses` - список выбранных типов анализа

### AnalyzeDataResponse
- `descriptive_stats` - результаты описательной статистики
- `normality_tests` - результаты тестов на нормальность
- `regression_analysis` - результаты регрессионного анализа
- `processing_log` - логи обработки данных
- `error` - информация об ошибках, если они возникли

## Обработка данных

Сервер поддерживает следующие форматы данных:
- CSV файлы (разделители: запятая, табуляция, точка с запятой)
- Excel файлы (XLSX, XLS)

Процесс обработки:
1. Загрузка и валидация файла
2. Предварительная обработка данных (определение типов, обработка пропусков)
3. Выполнение выбранных типов анализа
4. Форматирование результатов в соответствии с протоколом
5. Возвращение структурированного ответа

## Запуск проекта

### Предварительные требования
- Python 3.8 или выше
- pip (менеджер пакетов Python)
- virtualenv (опционально, для изоляции зависимостей)

### Установка зависимостей
```bash
# Создание и активация виртуальной среды (опционально)
python -m venv venv
source venv/bin/activate  # На Linux/MacOS
# или
venv\Scripts\activate     # На Windows

# Установка зависимостей
pip install -r requirements.txt
```

### Запуск сервера
```bash
python main.py
```

По умолчанию сервер запускается на порту 9000 и принимает соединения со всех интерфейсов.

## Взаимодействие с другими компонентами

Python-сервер взаимодействует с Go-сервером через gRPC протокол:

1. Go-сервер отправляет запрос на анализ с файлом и параметрами
2. Python-сервер выполняет необходимые расчеты
3. Результаты возвращаются в структурированном виде через Protocol Buffers
4. Go-сервер преобразует полученные данные в формат для фронтенда 